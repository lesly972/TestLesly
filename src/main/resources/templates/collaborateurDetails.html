<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layout :: page_head}"></head>

<body  style="background-color: #2c2c2c; color: #ffffff;">

<div style="text-align: center;"> <h1>Détails du Collaborateur</h1> </div>

<div th:if="${collaborateur != null}">
    <p>Nom : <span th:text="${collaborateur.nom}"></span></p>
    <p>Prénom : <span th:text="${collaborateur.prenom}"></span></p>
    <p>Email : <span th:text="${collaborateur.email}"></span></p>
    <p>Date d'embauche : <span th:text="${collaborateur.datePremierEmbauche}"></span></p>
    <p>Administrateur : <span th:text="${collaborateur.administrateur ? 'Oui' : 'Non'}"></span></p>

    <!--Mot de passe à Crypter pour afficher ou ajouter un changement de mot de passe selon les droits utilisateurs
    <p>Mot de passe : <span th:text="${collaborateur.motDePasse}"></span></p>-->

    <!-- boutton pour modifier les informations du collaborateur dans une page edit -->
    <td> <a th:href="@{/collaborateurs/edit/{id}(id=${collaborateur.id})}" class="btn btn-primary">Modifier information collaborateur</a></td>

    <!-- Information sur le restaurant du collaborateur
    <p>Travaille chez Wacdo <span th:text="${restaurants.nom}"></span> </p>
    <p>Poste chez Wacdo <span th:text="${restaurants.nom}"></span> : </p>-->

    <div th:if="${affectation != null}" class="mt-4">

        <h4>Affectation actuelle</h4>
        <p><strong>Restaurant :</strong> <span th:text="${affectation.restaurants.nom}">Nom du resto</span></p>
        <p><strong>Poste :</strong> <span th:text="${affectation.fonctions.nomDuPoste}">Nom du poste</span></p>
        <p><strong>Date de début :</strong> <span th:text="${#dates.format(affectation.dateDebut, 'dd/MM/yyyy')}">Date</span></p>

        <!-- affiche la date de fin uniquement si il y a une date de fin -->
        <p th:if="${affectation.dateFin != null}">
            <strong>Date de fin :</strong> <span th:text="${#dates.format(affectation.dateFin, 'dd/MM/yyyy')}">Date fin</span>
        </p>

        <a th:href="@{/affectation/modifier/{id}(id=${affectation.id})}" class="btn btn-primary">Modifier l'affectation</a>

    </div>

    <h4 class="mt-5">Historique des affectations</h4>
    <table class="table table-striped text-white">
        <thead>
        <tr>
            <th>Restaurant</th>
            <th>Poste</th>
            <th>Date de début</th>
            <th>Date de fin</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="a : ${historique}">
            <td th:text="${a.restaurants.nom}">Nom Resto</td>
            <td th:text="${a.fonctions.nomDuPoste}">Poste</td>
            <td th:text="${#dates.format(a.dateDebut, 'dd/MM/yyyy')}">Début</td>
            <td th:text="${a.dateFin != null ? #dates.format(a.dateFin, 'dd/MM/yyyy') : 'En cours'}">Fin</td>
        </tr>
        </tbody>
    </table>

</div>

<div th:if="${collaborateur == null}">
    <p th:text="${notif}"></p>
</div>

<td><a href="/collaborateurs">⬅ Retour à la liste</a></td>

<footer th:replace="~{layout :: page_footer}"></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>